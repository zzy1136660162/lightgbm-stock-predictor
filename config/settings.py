# -*- coding: utf-8 -*-
"""
配置文件 - 所有项目参数
"""

import os
from datetime import datetime

# ============== 路径配置 ==============
PROJECT_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
DATA_DIR = os.path.join(PROJECT_DIR, 'data')
RAW_DATA_DIR = os.path.join(DATA_DIR, 'raw')       # 原始数据
RESULTS_DIR = os.path.join(DATA_DIR, 'results')    # 回测结果
CONFIG_DIR = os.path.join(PROJECT_DIR, 'config')

# 确保目录存在
os.makedirs(RAW_DATA_DIR, exist_ok=True)
os.makedirs(RESULTS_DIR, exist_ok=True)

# ============== 数据参数 ==============
START_DATE = '20100101'           # 数据起始日期
END_DATE = datetime.now().strftime('%Y%m%d')  # 数据结束日期
DATA_CACHE_DAYS = 7               # 缓存有效期（天）

# ============== 模型参数 ==============
MODEL_PARAMS = {
    'n_estimators': 150,
    'learning_rate': 0.05,
    'max_depth': 5,
    'num_leaves': 31,
    'random_state': 42,
    'verbose': -1
}

# ============== 回测参数 ==============
BACKTEST_PARAMS = {
    'initial_cash': 100000,      # 初始资金
    'transaction_fee': 0.001,      # 交易费率 (0.1%)
    'slippage': 0.001,            # 滑点 (0.1%)
    'test_period': 100,           # 测试集大小
    'predict_days': 20            # 预测未来天数
}

# ============== 特征参数 ==============
FEATURE_COLS = [
    'ma5_ratio', 'ma10_ratio', 'ma20_ratio', 'ma40_ratio',  # 移动平均比
    'rsi',                                               # 相对强弱
    'macd', 'macd_signal',                               # 移动平均收敛散度
    'change_5', 'change_10',                             # 价格变化率
    'volatility'                                         # 波动率
]

# ============== API限制 ==============
AKSHARE_SLEEP = 0.8  # 请求间隔（秒）- 调大避免限流
MAX_RETRIES = 5     # 下载重试次数 - 增加重试

# ============== 默认股票列表 ==============
DEFAULT_STOCKS = [
    ('601398', '工商银行'), ('601939', '建设银行'), ('601288', '农业银行'),
    ('601988', '中国银行'), ('600036', '招商银行'), ('000001', '平安银行'),
    ('600000', '浦发银行'), ('601229', '上海银行'), ('600015', '华夏银行'),
    ('600016', '民生银行'), ('600030', '中信证券'), ('600837', '海通证券'),
    ('600999', '招商证券'), ('601066', '中信建投'), ('600958', '东方证券'),
    ('600369', '西南证券'), ('000166', '中宏证券'), ('601318', '中国平安'),
    ('601601', '中国太保'), ('601319', '中国人保'), ('601628', '中国人寿'),
    ('600519', '贵州茅台'), ('000858', '五粮液'), ('000568', '泸州老窖'),
    ('600809', '山西汾酒'), ('603288', '海天味业'), ('600887', '伊利股份'),
    ('000651', '格力电器'), ('000333', '美的集团'), ('600703', '三安光电'),
    ('600460', '紫金矿业'), ('000725', '京东方A'), ('600536', '中国软件'),
    ('002230', '东方通信'), ('300760', '迈瑞医疗'), ('000063', '中兴通讯'),
    ('600050', '中国联通'), ('600276', '恒瑞医药'), ('600529', '山东药玻'),
    ('000513', '丽珠集团'), ('300003', '乐普医疗'), ('601899', '紫金矿业'),
    ('600019', '宝钢股份'), ('600010', '包钢股份'), ('600507', '长力股份'),
    ('600808', '马钢股份'), ('600221', '海南航空'), ('600048', '保利地产'),
    ('600383', '金地集团'), ('600340', '华夏幸福'), ('000002', '万 科Ａ'),
]
